---
import { getCollection, getEntryBySlug } from "astro:content"
import "katex/dist/katex.min.css"
import Layout from "../../components/Layout.astro"
import "../../lib/main.postcss"
import { convertToHTML } from "../../lib/md-to-html"
import "../../lib/theme.postcss"

const entry = (await getEntryBySlug("decks", Astro.params.id!))!
const headings = (await entry.render()).headings
const title = headings[0]?.text || "Untitled deck"
const html = entry && convertToHTML(entry.body)

export async function getStaticPaths() {
  const slides = await getCollection("decks")

  return slides.map((x) => ({ params: { id: x.slug } }))
}
---

<Layout title={title} set:html={html} />
